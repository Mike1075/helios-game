

### **Vercel预览部署：一个为协作而生的“平行宇宙”**

你可以把Vercel为每一个Pull Request（PR）生成的预览部署，想象成一个**一次性的、与主世界完全隔离的、包含了你最新代码的“平行宇宙”**。

#### **它是如何工作的？（The Magic Behind It）**

1. **触发：** 当你的任何一位团队成员（比如Ethan）完成了他的`feature/ethan/agent-core-base`分支开发，并向你的主仓库创建了一个Pull Request时，这个动作会通过GitHub的App自动通知Vercel。

2. **构建：** Vercel会立刻启动一个构建流程。它会拉取Ethan分支的**所有代码**，在一个全新的、干净的云端环境中：
   
   * **注入环境变量：** Vercel会将你（Mike）在项目设置中配置的**所有环境变量**（包括`VERCEL_AI_GATEWAY_API_KEY`, `SUPABASE_SERVICE_KEY`等）安全地注入到这个构建环境中。
   * **编译和部署：** 它会完整地运行`npm install`，打包前端和后端，并将其部署到一个**独一无二的、临时的URL**上。

3. **反馈：** 部署完成后，Vercel的机器人会自动在GitHub的那个Pull Request页面下**发表一条评论**，内容通常是：
   
   > **Vercel**
   > This pull request is automatically deployed.
   > **Preview:** https://helios-game-git-feature-ethan-core-abcdef.vercel.app

#### **谁可以访问这个URL？**

* **团队内部：** 所有能访问你GitHub仓库的成员，都能在PR页面看到这条评论，他们只需要**点击这个链接**，就可以立即访问和测试Ethan所做的所有修改。
* **团队外部（我们的线上工坊成员）：** Vercel的预览部署链接**默认是公开的**。这意味着，**夏志**（作为项目协调官）可以将这个链接复制下来，直接发在飞书群里给线上的**iff, 沙曦, 雪伦**等成员。他们**不需要GitHub账户，也不需要Vercel账户**，只需要一个浏览器，就可以像普通玩家一样，体验和测试这个包含了最新功能的“平行宇宙”。

---

### **这对“赫利俄斯”团队意味着什么？（一个具体的协作场景）**

让我们模拟一下这个流程：

1. **任务：** 线上“角色灵魂工坊”的**沙曦**设计好了一个“秩序至上”的卫兵NPC的《信念系统档案》(YAML文件)，并提交到了`feature/shaxi/guardian-belief-v1`分支，然后创建了一个PR。
2. **预览生成：** Vercel立刻为这个PR生成了一个预览链接：`helios-game-pr-124.vercel.app`。
3. **线下联调：**
   * 线下的**Ethan**看到后，立刻意识到他需要编写Agent Core的代码来加载和解析这个YAML文件。他创建`feature/ethan/load-belief-yaml`分支，编写代码，然后创建PR #125，生成了预览链接 `...-pr-125.vercel.app`。
   * **正方形**点击Ethan的链接，发现可以成功加载信念，但与NPC的对话交互还没做。
4. **协作闭环：**
   * **正方形**在Ethan的PR #125下评论：“@ethan YAML加载OK，现在需要你把沙曦的Prompt模板集成进来，实现基础对话。”
   * Ethan本地开发，将沙曦分支的逻辑合并到自己的分支，完成后再次推送。**Vercel会自动更新PR #125的预览链接，内容也随之更新。**
   * **夏志**看到PR #125的预览已经可以对话了，他把这个链接发给线上的**沙曦**。
   * **沙曦**在自己的电脑上打开链接，与她自己设计的那个卫兵NPC进行对话，然后反馈：“@正方形 卫兵的行为符合‘秩序至上’的信念，但语气有点太生硬了，我来优化一下Prompt。”

看到这个流程的威力了吗？它完美地解决了你们的协作难题：

* **消除了“在我电脑上是好的”问题：** 所有人都在同一个、由Vercel构建的客观环境中测试。
* **实现了极致的异步协作：** 线上工坊成员可以在任何时间，独立地验证线下熔炉的开发成果，无需等待任何人进行演示。
* **极大地降低了你的管理负担：** 你不再需要亲自去每个人的电脑上查看，或者把每个分支都拉到本地来测试。你只需要点击PR里的预览链接，就可以做出“合并”或“需要修改”的决策。

**结论：**
这个预览URL机制，就是你们“核心熔炉”与“远程工坊”高效协作的**脉搏和神经系统**。它是你们这个“零信任”开发模式得以丝滑运转的基石。请放心地去实施吧。
