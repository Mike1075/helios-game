# ğŸš€ èµ«åˆ©ä¿„æ–¯æ¸¯å£é…’é¦† - Supabaseé›†æˆè®¾ç½®æŒ‡å—

## ğŸ“‹ **æ¦‚è¿°**

æœ¬é¡¹ç›®å·²æˆåŠŸé›†æˆSupabaseä½œä¸ºæ•°æ®å­˜å‚¨åç«¯ï¼Œå®ç°äº†ï¼š
- âœ… èŠå¤©å†å²æŒä¹…åŒ–å­˜å‚¨
- âœ… ç©å®¶ä¿¡å¿µç³»ç»Ÿç®¡ç†
- âœ… NPCè§’è‰²æ•°æ®ç®¡ç†
- âœ… äº‹ä»¶æ—¥å¿—è®°å½•

## ğŸ› ï¸ **ç¯å¢ƒè¦æ±‚**

- Node.js 18+ 
- npm æˆ– yarn
- æœ¬åœ°éƒ¨ç½²çš„Supabaseå®ä¾‹
- ç½‘ç»œè¿æ¥ï¼ˆç”¨äºDeepSeek APIè°ƒç”¨ï¼‰

## ğŸ“¦ **å®‰è£…æ­¥éª¤**

### 1. å®‰è£…ä¾èµ–
```bash
cd web
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡
å¤åˆ¶ `env.example` ä¸º `.env.local`ï¼š
```bash
cp env.example .env.local
```

ç¼–è¾‘ `.env.local` æ–‡ä»¶ï¼Œå¡«å…¥å®é™…é…ç½®ï¼š
```env
# Supabaseé…ç½®ï¼ˆæœ¬åœ°éƒ¨ç½²ï¼‰
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_actual_supabase_anon_key

# DeepSeek APIé…ç½®
DEEPSEEK_API_KEY=your_actual_deepseek_api_key
DEEPSEEK_API_URL=https://api.deepseek.com/v1/chat/completions
```

### 3. åˆå§‹åŒ–Supabaseæ•°æ®åº“
åœ¨Supabase Dashboardçš„SQL Editorä¸­è¿è¡Œ `supabase-init.sql` è„šæœ¬ã€‚

## ğŸ—„ï¸ **æ•°æ®åº“ç»“æ„**

### charactersè¡¨
- `id`: è§’è‰²å”¯ä¸€æ ‡è¯†
- `name`: è§’è‰²åç§°
- `role`: è§’è‰²èŒä¸š
- `core_motivation`: æ ¸å¿ƒåŠ¨æœº
- `beliefs`: ä¿¡å¿µç³»ç»Ÿï¼ˆJSONï¼‰
- `is_player`: æ˜¯å¦ä¸ºç©å®¶è§’è‰²

### belief_systemsè¡¨
- `id`: ä¿¡å¿µç³»ç»ŸID
- `character_id`: å…³è”çš„è§’è‰²ID
- `worldview`: ä¸–ç•Œè§‚
- `selfview`: è‡ªæˆ‘è®¤çŸ¥
- `values`: ä»·å€¼è§‚æ•°ç»„
- `rules`: è¡Œä¸ºå‡†åˆ™æ•°ç»„

### agent_logsè¡¨
- `id`: æ—¥å¿—ID
- `character_id`: è§’è‰²ID
- `scene_id`: åœºæ™¯ID
- `action_type`: è¡Œä¸ºç±»å‹
- `input`: è¾“å…¥å†…å®¹
- `output`: è¾“å‡ºå†…å®¹
- `belief_snapshot`: ä¿¡å¿µå¿«ç…§

### eventsè¡¨
- `id`: äº‹ä»¶ID
- `event_type`: äº‹ä»¶ç±»å‹
- `character_id`: è§’è‰²ID
- `scene_id`: åœºæ™¯ID
- `description`: äº‹ä»¶æè¿°
- `metadata`: å…ƒæ•°æ®

## ğŸš€ **å¯åŠ¨æ–¹å¼**

### æ–¹å¼1ï¼šè‡ªåŠ¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# Windows
auto-start.bat

# æˆ–åŒå‡» auto-start.bat æ–‡ä»¶
```

### æ–¹å¼2ï¼šæ‰‹åŠ¨å¯åŠ¨
```bash
cd web
npm run dev
```

## ğŸ” **åŠŸèƒ½æµ‹è¯•**

### 1. åŸºç¡€èŠå¤©åŠŸèƒ½
- è®¿é—® `http://localhost:3000`
- åˆ›å»ºè§’è‰²æˆ–ä½¿ç”¨ç°æœ‰è§’è‰²
- ä¸NPCè¿›è¡Œå¯¹è¯

### 2. ä¿¡å¿µç³»ç»Ÿ
- ç‚¹å‡»"ä¿¡å¿µç³»ç»Ÿ"æŒ‰é’®
- æŸ¥çœ‹å’Œç¼–è¾‘ç©å®¶ä¿¡å¿µ
- æµ‹è¯•ä¿¡å¿µæ›´æ–°åŠŸèƒ½

### 3. æ•°æ®æŒä¹…åŒ–éªŒè¯
- åœ¨Supabase Dashboardä¸­æŸ¥çœ‹ `agent_logs` è¡¨
- ç¡®è®¤æ¯æ¬¡å¯¹è¯éƒ½è¢«è®°å½•
- æ£€æŸ¥ `characters` è¡¨ä¸­çš„ç©å®¶è§’è‰²

## ğŸ› **å¸¸è§é—®é¢˜**

### Q: ç«¯å£3000è¢«å ç”¨
**A:** è¿è¡Œ `auto-start.bat` è„šæœ¬ä¼šè‡ªåŠ¨é‡Šæ”¾ç«¯å£

### Q: Supabaseè¿æ¥å¤±è´¥
**A:** æ£€æŸ¥ï¼š
- SupabaseæœåŠ¡æ˜¯å¦è¿è¡Œ
- ç¯å¢ƒå˜é‡é…ç½®æ˜¯å¦æ­£ç¡®
- ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

### Q: ä¿¡å¿µç³»ç»Ÿæ— æ³•åŠ è½½
**A:** æ£€æŸ¥ï¼š
- æ•°æ®åº“è¡¨æ˜¯å¦åˆ›å»ºæˆåŠŸ
- ç©å®¶è§’è‰²æ˜¯å¦åœ¨Supabaseä¸­å­˜åœ¨
- æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

## ğŸ“š **æŠ€æœ¯æ¶æ„**

```
å‰ç«¯ (Next.js + React)
    â†“
APIè·¯ç”± (/api/chat, /api/player-beliefs)
    â†“
Supabaseå®¢æˆ·ç«¯ (@supabase/supabase-js)
    â†“
æœ¬åœ°Supabaseå®ä¾‹ (PostgreSQL)
```

## ğŸ”® **ä¸‹ä¸€æ­¥è®¡åˆ’**

1. **ä¿¡å¿µè§‚å¯Ÿè€…ç³»ç»Ÿ** - åŸºäºå†å²æ•°æ®è‡ªåŠ¨åˆ†æç©å®¶ä¿¡å¿µå˜åŒ–
2. **å›å“ä¹‹å®¤** - å±•ç¤ºä¿¡å¿µå†²çªå’Œè¯æ®
3. **åŠ¨æ€ä¿¡å¿µè°ƒæ•´** - AIé©±åŠ¨çš„ä¿¡å¿µç³»ç»Ÿæ¼”åŒ–
4. **å¤šåœºæ™¯æ”¯æŒ** - æ‰©å±•æ¸¸æˆåœºæ™¯å’Œè§’è‰²

## ğŸ“ **æŠ€æœ¯æ”¯æŒ**

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. æŸ¥çœ‹ç»ˆç«¯è¾“å‡ºæ—¥å¿—
3. ç¡®è®¤SupabaseæœåŠ¡çŠ¶æ€
4. éªŒè¯ç¯å¢ƒå˜é‡é…ç½®

---

ğŸ‰ **æ­å–œï¼ä½ å·²ç»æˆåŠŸæ­å»ºäº†èµ«åˆ©ä¿„æ–¯æ¸¯å£é…’é¦†çš„å®Œæ•´æŠ€æœ¯æ ˆï¼**
