# Helios 聊天系统 - 意识的棱镜

## 功能概述

这是Helios项目的核心聊天功能实现，允许玩家与两个具有独特信念系统的NPC进行深度对话。

## 场景设定

**夜光酒馆 - 2035年**

一个充满神秘色彩的未来酒馆，两位独特的NPC等待与玩家展开哲学对话。

## NPC角色

### 🌙 埃拉拉 (Elara)
- **角色**: 酒馆老板娘
- **核心动机**: 帮助他人找到内心的光明
- **性格特征**: 温和而智慧，善于倾听和引导
- **信念系统**: 相信每个人都有内在光芒，困难是成长机会

### 📜 马库斯 (Marcus)
- **角色**: 哲学家诗人
- **核心动机**: 质疑现实的本质
- **性格特征**: 深沉而挑战性，喜欢引发深度思考
- **信念系统**: 认为现实可能是信念的投射，质疑是通往智慧的道路

## 技术实现

### 前端 (Next.js)
- **响应式聊天界面**: 支持实时消息展示
- **NPC信息面板**: 显示角色动机和当前状态
- **信念系统提示**: 帮助玩家理解游戏核心理念
- **本地开发模式**: 在API不可用时提供fallback响应

### 后端 (FastAPI)
- **`/api/chat`**: 核心聊天API端点
- **信念系统编译器**: 将NPC信念转换为LLM提示词
- **智能响应生成**: 基于信念系统的一致性回应
- **日志记录**: 为后续的认知失调检测做准备

## 信念系统架构

每个NPC都有结构化的信念系统：

```yaml
worldview:    # 世界观信念
  - 对世界本质的理解
  
selfview:     # 自我认知
  - 对自身角色和使命的认知
  
values:       # 价值观
  - 核心价值判断标准
```

## 开发模式

### 零信任本地开发
- **本地**: 使用模拟数据进行UI开发和测试
- **云端**: 通过Vercel预览环境进行完整功能测试
- **API调用**: 本地失败时自动fallback到模拟响应

## 使用方法

1. **访问页面**: 导航到 `/my-page`
2. **查看NPC信息**: 了解两个角色的背景和动机
3. **开始对话**: 在输入框中输入你的想法
4. **体验回应**: 观察NPC如何基于其信念系统回应
5. **深度互动**: 尝试触发认知失调，为未来的"回响之室"做准备

## 未来规划

- [ ] **回响之室**: 实现主观因果归因功能
- [ ] **信念演化**: 基于互动历史动态更新信念
- [ ] **认知失调检测**: 自动识别冲突并触发内省机会
- [ ] **Supabase集成**: 持久化对话历史和信念状态
- [ ] **Zep记忆引擎**: 增强对话连续性

## 哲学理念

这不是传统的聊天机器人，而是一个"意识的棱镜"实验：

> "玩家投入的是纯粹的意识之光，这束光透过他们内心独特的信念系统折射，创造出独一无二的主观体验。"

每次对话都是一次内省的机会，帮助玩家理解自己的信念如何塑造对现实的感知。

---

**开发者**: 按照Helios项目开发规范实现  
**状态**: MVP核心功能完成  
**环境**: 支持本地开发和云端部署
